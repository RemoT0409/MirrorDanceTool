<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>舞蹈片段學習工具</title>

    <!-- Open Graph / Facebook / Threads -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://RemoT0409.github.io/MirrorDanceTool/"
    />
    <meta
      property="og:title"
      content="舞蹈片段學習工具 - 拆解影片段落，反覆練習每個動作"
    />
    <meta
      property="og:description"
      content="支援 YouTube 和 Bilibili 影片，自動分段、循環播放、鏡像模式，讓舞蹈學習更有效率！"
    />
    <meta
      property="og:image"
      content="https://RemoT0409.github.io/MirrorDanceTool/og-image.png"
    />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:url"
      content="https://RemoT0409.github.io/MirrorDanceTool/"
    />
    <meta
      name="twitter:title"
      content="舞蹈片段學習工具 - 拆解影片段落，反覆練習每個動作"
    />
    <meta
      name="twitter:description"
      content="支援 YouTube 和 Bilibili 影片，自動分段、循環播放、鏡像模式，讓舞蹈學習更有效率！"
    />
    <meta
      name="twitter:image"
      content="https://RemoT0409.github.io/MirrorDanceTool/og-image.png"
    />
    <meta name="twitter:image:alt" content="舞蹈片段學習工具" />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>🎬 舞蹈片段學習工具</h1>
        <p class="subtitle">拆解影片段落，反覆練習每個動作</p>
      </header>

      <!-- 影片連結輸入區 -->
      <section class="video-input-section">
        <div class="input-group">
          <label for="video-url">貼上影片連結（支援 YouTube / Bilibili）</label>
          <div class="url-input-wrapper">
            <input
              type="text"
              id="video-url"
              placeholder="https://www.youtube.com/watch?v=... 或 https://www.bilibili.com/video/..."
              autocomplete="off"
            />
            <button id="load-video-btn" class="btn btn-primary">
              載入影片
            </button>
          </div>
          <div
            style="
              margin-top: 10px;
              padding: 10px;
              background: #fff3cd;
              border-left: 4px solid #ffc107;
              border-radius: 4px;
              font-size: 12px;
              color: #856404;
            "
          >
            <strong>💡 提示：</strong> YouTube
            影片支援完整功能（自動分段、時間控制等）。Bilibili
            影片可能因區域限制或版權限制無法嵌入播放，建議優先使用 YouTube
            連結。
          </div>
        </div>
      </section>

      <!-- 影片播放區 -->
      <section class="video-section" id="video-section" style="display: none">
        <div class="video-wrapper">
          <div id="video-player"></div>
        </div>

        <!-- 影片控制區 -->
        <div class="video-controls">
          <div class="time-display">
            <span id="current-time">00:00</span> /
            <span id="total-time">00:00</span>
          </div>
          <div class="control-buttons">
            <button id="play-pause-btn" class="btn btn-control">▶️ 播放</button>
            <button id="stop-btn" class="btn btn-control">⏹️ 停止</button>
            <button id="mirror-btn" class="btn btn-control">🪞 鏡像</button>
          </div>
        </div>
      </section>

      <!-- 自動分段區 -->
      <section
        class="auto-segment-section"
        id="auto-segment-section"
        style="display: none"
      >
        <h2>⚡ 自動分段</h2>
        <div class="auto-segment-controls">
          <div class="auto-segment-input">
            <label for="segment-interval">每段時間長度（秒）</label>
            <input
              type="number"
              id="segment-interval"
              placeholder="例如：10"
              min="5"
              max="300"
              value="10"
            />
          </div>
          <button id="auto-segment-btn" class="btn btn-primary">
            🔀 自動分段
          </button>
          <button id="clear-auto-segments-btn" class="btn btn-secondary">
            清除自動分段
          </button>
        </div>
        <div id="auto-segments-preview" class="auto-segments-preview"></div>
      </section>

      <!-- A-B 段落切割區 -->
      <section
        class="segment-section"
        id="segment-section"
        style="display: none"
      >
        <h2>✂️ 手動新增練習段落</h2>
        <div class="segment-inputs">
          <div class="time-input-group">
            <label for="start-time">開始時間</label>
            <input
              type="text"
              id="start-time"
              placeholder="00:00.0"
              pattern="[0-9]{1,2}:[0-5][0-9]\.[0-9]"
            />
            <button id="set-start-btn" class="btn btn-small">
              設為當前時間
            </button>
          </div>
          <div class="time-input-group">
            <label for="end-time">結束時間</label>
            <input
              type="text"
              id="end-time"
              placeholder="00:00.0"
              pattern="[0-9]{1,2}:[0-5][0-9]\.[0-9]"
            />
            <button id="set-end-btn" class="btn btn-small">設為當前時間</button>
          </div>
        </div>
        <div class="segment-actions">
          <input
            type="text"
            id="segment-name"
            placeholder="段落名稱（選填）"
            class="segment-name-input"
          />
          <button id="add-segment-btn" class="btn btn-success">
            ➕ 新增練習段
          </button>
        </div>
      </section>

      <!-- 練習清單 -->
      <section
        class="playlist-section"
        id="playlist-section"
        style="display: none"
      >
        <h2>📋 練習清單</h2>
        <div id="segments-list" class="segments-list">
          <!-- 段落項目將動態插入這裡 -->
        </div>
      </section>
    </div>

    <!-- 段落詳情 Modal -->
    <div id="segment-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>編輯段落</h2>
        <div class="modal-body">
          <div class="form-group">
            <label for="modal-segment-name">段落名稱</label>
            <input
              type="text"
              id="modal-segment-name"
              placeholder="例如：基本步"
            />
          </div>
          <div class="form-group">
            <label for="modal-start-time">開始時間</label>
            <input type="text" id="modal-start-time" placeholder="00:00.0" />
          </div>
          <div class="form-group">
            <label for="modal-end-time">結束時間</label>
            <input type="text" id="modal-end-time" placeholder="00:00.0" />
          </div>
          <div class="form-group">
            <label for="modal-notes">註解</label>
            <textarea
              id="modal-notes"
              rows="4"
              placeholder="輸入重心、拍子、技巧提醒等...&#10;例如：&#10;- 重心在右腳&#10;- 第2拍開始&#10;- 這裡手會慢一點"
            ></textarea>
          </div>
          <div class="modal-actions">
            <button id="save-segment-btn" class="btn btn-primary">儲存</button>
            <button id="delete-segment-btn" class="btn btn-danger">刪除</button>
            <button id="cancel-modal-btn" class="btn btn-secondary">
              取消
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 微信贊助 Modal -->
    <div id="wechat-sponsor-modal" class="modal">
      <div class="modal-content" style="max-width: 400px; text-align: center">
        <span
          class="close-wechat-modal"
          style="
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
          "
          >&times;</span
        >
        <h2 style="margin-top: 0; color: #07c160">💚 微信贊助</h2>
        <div style="padding: 20px">
          <p style="margin-bottom: 20px; color: #666">
            掃描下方二維碼進行贊助<br />
            感謝你的支持！🙏
          </p>
          <div
            style="
              background: #f0f8ff;
              padding: 20px;
              border-radius: 12px;
              display: inline-block;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            "
          >
            <img
              id="wechat-qr-code"
              src="wechat-qr.png"
              alt="微信支付二維碼"
              style="
                width: 250px;
                height: 250px;
                display: block;
                margin: 0 auto;
                border-radius: 8px;
              "
              onerror="this.style.display='none'; document.getElementById('wechat-qr-placeholder').style.display='flex';"
            />
            <div
              id="wechat-qr-placeholder"
              style="
                width: 250px;
                height: 250px;
                display: none;
                background: #e6f3ff;
                border: 2px dashed #ddd;
                border-radius: 8px;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: #999;
                font-size: 14px;
                margin: 0 auto;
              "
            >
              <div style="text-align: center">
                <p style="margin: 0">請上傳微信支付二維碼</p>
                <p style="font-size: 12px; margin-top: 10px; margin-bottom: 0">
                  將二維碼圖片命名為 <code>wechat-qr.png</code><br />
                  放在專案根目錄中
                </p>
              </div>
            </div>
          </div>
          <p style="margin-top: 20px; font-size: 12px; color: #999">
            💡 提示：請使用微信掃描二維碼進行支付
          </p>
        </div>
      </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>

    <!-- 免責聲明 -->
    <footer
      style="
        text-align: center;
        padding: 20px;
        background: rgba(68, 114, 196, 0.4);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.9);
        font-size: 12px;
        margin-top: 40px;
      "
    >
      <!-- 贊助區塊 -->
      <div
        style="
          margin-bottom: 20px;
          padding: 15px;
          background: rgba(91, 155, 213, 0.3);
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        "
      >
        <p
          style="
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
          "
        >
          ☕ 如果這個工具對你有幫助，歡迎贊助支持！
        </p>
        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="https://buymeacoffee.com/retioklp"
            target="_blank"
            style="
              display: inline-block;
              padding: 10px 20px;
              background: #ffdd00;
              color: #000;
              text-decoration: none;
              border-radius: 8px;
              font-weight: 600;
              font-size: 14px;
              transition: transform 0.2s;
            "
            onmouseover="this.style.transform='scale(1.05)'"
            onmouseout="this.style.transform='scale(1)'"
          >
            ☕ Buy Me a Coffee
          </a>
          <button
            id="wechat-sponsor-btn"
            style="
              display: inline-block;
              padding: 10px 20px;
              background: #07c160;
              color: white;
              border: none;
              border-radius: 8px;
              font-weight: 600;
              font-size: 14px;
              cursor: pointer;
              transition: transform 0.2s;
            "
            onmouseover="this.style.transform='scale(1.05)'"
            onmouseout="this.style.transform='scale(1)'"
          >
            💚 微信贊助
          </button>
        </div>
        <p
          style="
            margin: 10px 0 0 0;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.8);
          "
        >
          你的支持是我持續改進的動力 💪
        </p>
      </div>

      <p style="margin: 5px 0">
        本工具僅供個人學習使用，所有影片內容由 YouTube/Bilibili 提供
      </p>
      <p style="margin: 5px 0">使用者需遵守相關平台的使用條款和版權規定</p>
      <p style="margin: 5px 0; opacity: 0.7">
        本工具不儲存、不下載、不複製任何影片內容
      </p>
    </footer>
  </body>
</html>
